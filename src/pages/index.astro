---
import Card from "@/components/Card.astro"
import type { Frontmatter } from "@/types"
import type { MarkdownInstance } from "astro"
import { Icon } from "astro-icon"
import { Image } from "@astrojs/image/components"
import Layout from "../layouts/Layout.astro"

const posts: MarkdownInstance<Frontmatter>[] = await Astro.glob("./blog/*.md")
const { frontmatter } = posts.find(
  (p) => p.frontmatter.hero
) as MarkdownInstance<Frontmatter>
const pageDescription =
  "Poesía Uniandes es un espacio de expresión artística, literaria y poética de la Universidad de los Andes. Leemos, recitamos, cantamos, rapeamos."
---

<Layout title="Posts - Poesía Uniandes" description={pageDescription}>
  <div
    class="flex items-center mt-[84px] mb-24 mx-auto max-w-screen-2xl text-black"
  >
    <div class="w-1/2">
      <a href={`/blog/${frontmatter.href}`}>
        <Image
          src={frontmatter.photoThumbnail}
          alt="Hero image"
          height={600}
          aspectRatio={1}
          loading="eager"
          class="w-full object-cover hover:opacity-80 transition-opacity"
        />
      </a>
    </div>
    <div class="flex flex-col ml-12 w-1/2">
      <a href={`/blog/${frontmatter.href}`} class="mb-8">
        <h1 class="text-5xl leading-tight hover:underline">
          {frontmatter.title}
        </h1>
      </a>
      <div class="mb-8">
        <a href={frontmatter.authorLink} target="_blank">
          <div class="text-sm font-medium hover:underline">
            {frontmatter.author}
          </div>
        </a>
        <p class="text-xs">{frontmatter.date}</p>
      </div>
      <a
        class="flex font-medium items-center text-xl font-serif hover:scale-110 duration-200 ease-in w-fit"
        href={`/blog/${frontmatter.href}`}
      >
        Leer<span><Icon name="akar-icons:arrow-right" class="w-5 ml-1" /></span>
      </a>
    </div>
  </div>
  <div class="px-16 mx-auto max-w-screen-2xl">
    <h2 class="text-4xl mb-8">Poemas de la semana</h2>
    <div class="grid grid-cols-3 justify-items-center gap-y-16 mb-24">
      {posts.map((p) => <Card {...p.frontmatter} />)}
    </div>
  </div>
</Layout>
